<!DOCTYPE html>
<html lang="ja"><head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BIBIMAKE ã‚·ãƒ•ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&amp;family=Outfit:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
<style>
:root{--navy:#1B3A5C;--navy-dark:#122842;--accent:#3A7CA5;--accent-light:#5BA3CC;--bg:#F4F7FA;--card:#FFF;--text:#2C3E50;--text-light:#7B8FA3;--border:#E2E8F0;--early-bg:#E8F5E9;--early-fg:#2E7D32;--late-bg:#FFF3E0;--late-fg:#E65100;--off-bg:#FFEBEE;--off-fg:#C62828;--loc-bg:#E3F2FD;--loc-fg:#1565C0;--study-bg:#F3E5F5;--study-fg:#7B1FA2;--event-bg:#E0F7FA;--event-fg:#00838F;--shadow-sm:0 1px 3px rgba(0,0,0,.08);--shadow-md:0 4px 12px rgba(0,0,0,.1);--shadow-lg:0 8px 30px rgba(0,0,0,.12);--radius:12px;--radius-sm:8px}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Noto Sans JP','Outfit',sans-serif;background:var(--bg);color:var(--text);min-height:100vh}

/* Login */
.login-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(18,40,66,.7);backdrop-filter:blur(8px);z-index:9999;display:flex;align-items:center;justify-content:center;transition:opacity .4s}
.login-overlay.hidden{opacity:0;pointer-events:none}
.login-box{background:#fff;border-radius:16px;padding:36px;width:340px;max-width:90vw;box-shadow:0 20px 60px rgba(0,0,0,.25);text-align:center}
.login-logo{width:52px;height:52px;background:var(--accent);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;font-weight:700;font-family:Outfit;color:#fff;margin:0 auto 12px}
.login-title{font-family:Outfit;font-size:20px;font-weight:700;color:var(--navy);margin-bottom:4px}
.login-sub{font-size:12px;color:var(--text-light);margin-bottom:20px}
.login-input{width:100%;padding:11px 14px;border:2px solid var(--border);border-radius:10px;font-size:14px;font-family:inherit;outline:none;transition:.2s;text-align:center;letter-spacing:2px}
.login-input:focus{border-color:var(--accent)}
.login-input.shake{border-color:#EF5350;animation:shake .4s}
@keyframes shake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-8px)}40%,80%{transform:translateX(8px)}}
.login-btn{width:100%;padding:11px;border:none;border-radius:10px;background:var(--navy);color:#fff;font-size:14px;font-weight:600;font-family:inherit;cursor:pointer;margin-top:12px;transition:.2s}
.login-btn:hover{background:var(--accent)}
.login-error{color:#EF5350;font-size:11px;margin-top:8px;min-height:16px}

/* Header */
.header{background:linear-gradient(135deg,var(--navy),var(--navy-dark));color:#fff;position:sticky;top:0;z-index:100;box-shadow:var(--shadow-md)}
.header-inner{max-width:1300px;margin:0 auto;padding:12px 20px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px}
.logo{display:flex;align-items:center;gap:10px}
.logo-icon{width:36px;height:36px;background:var(--accent);border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:700;font-family:Outfit}
.logo-text{font-family:Outfit;font-size:19px;font-weight:600;letter-spacing:1px}
.logo-sub{font-size:10px;opacity:.6;letter-spacing:2px}
.nav{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.month-nav{display:flex;align-items:center;gap:6px}
.month-nav button{width:32px;height:32px;border:1px solid rgba(255,255,255,.2);background:0 0;color:#fff;border-radius:7px;cursor:pointer;font-size:13px;display:flex;align-items:center;justify-content:center;transition:.2s}
.month-nav button:hover{background:rgba(255,255,255,.1)}
.m-label{font-family:Outfit;font-size:15px;font-weight:600;min-width:110px;text-align:center}
.mode-toggle{display:flex;background:rgba(255,255,255,.1);border-radius:7px;overflow:hidden}
.mode-btn{padding:6px 14px;border:none;background:0 0;color:rgba(255,255,255,.5);font-size:11px;font-weight:500;cursor:pointer;transition:.3s;font-family:inherit}
.mode-btn.active{background:var(--accent);color:#fff}
.btn-logout{background:rgba(255,255,255,.15);color:#fff;border:1px solid rgba(255,255,255,.2);padding:5px 10px;font-size:10px;border-radius:6px;cursor:pointer;font-family:inherit;display:none}
.btn-logout:hover{background:rgba(255,255,255,.25)}
.a-badge{background:rgba(76,175,80,.2);color:#81C784;font-size:9px;font-weight:600;padding:2px 7px;border-radius:10px;margin-left:3px;display:none}

/* Sync indicator */
.sync-indicator{display:none;align-items:center;gap:5px;font-size:10px;padding:3px 10px;border-radius:12px;font-weight:600;animation:fadeIn .3s}
.sync-indicator.syncing{display:flex;background:rgba(255,235,59,.2);color:#FDD835}
.sync-indicator.synced{display:flex;background:rgba(76,175,80,.2);color:#81C784}
.sync-indicator.error{display:flex;background:rgba(239,83,80,.2);color:#EF5350}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes spin{to{transform:rotate(360deg)}}
.sync-spinner{display:inline-block;width:12px;height:12px;border:2px solid rgba(255,255,255,.3);border-top-color:#FDD835;border-radius:50%;animation:spin .8s linear infinite}

/* Main */
.main{max-width:1300px;margin:0 auto;padding:18px}
.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:8px;margin-bottom:16px}
.stat{background:var(--card);border-radius:var(--radius-sm);padding:12px 8px;box-shadow:var(--shadow-sm);text-align:center}
.stat-v{font-family:Outfit;font-size:22px;font-weight:700;color:var(--navy)}
.stat-l{font-size:10px;color:var(--text-light);margin-top:2px}

/* Calendar */
.cal-card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow-sm);overflow:hidden;margin-bottom:16px}
.cal-h{display:grid;grid-template-columns:repeat(7,1fr);background:var(--navy);color:#fff}
.cal-h div{padding:10px 6px;text-align:center;font-size:12px;font-weight:600}
.cal-h div:first-child{color:#FF8A80}
.cal-h div:last-child{color:#82B1FF}
.cal-g{display:grid;grid-template-columns:repeat(7,1fr)}
.cal-c{min-height:105px;border:1px solid var(--border);padding:4px;transition:.15s}
.cal-c:hover{background:#F8FAFC}
.cal-c.empty{background:#FAFAFA}
.cal-c.sun{background:#FFF5F5}
.cal-c.sat{background:#F5F8FF}
.cal-c.today{box-shadow:inset 0 0 0 2px var(--accent)}
.cal-c.editable{cursor:pointer}
.cal-c.editable:hover{background:#EDF5FF;box-shadow:inset 0 0 0 1px var(--accent)}
.cd{font-family:Outfit;font-size:12px;font-weight:700;margin-bottom:3px;display:flex;justify-content:space-between}
.cal-c.sun .cd{color:#EF5350}
.cal-c.sat .cd{color:#42A5F5}
.cd-n{font-size:9px;background:var(--navy);color:#fff;padding:1px 5px;border-radius:8px}
.tg{display:block;padding:1px 4px;border-radius:3px;font-size:9.5px;font-weight:600;margin:1px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.tg-e{background:var(--early-bg);color:var(--early-fg)}
.tg-l{background:var(--late-bg);color:var(--late-fg)}
.tg-o{background:var(--off-bg);color:var(--off-fg)}
.tg-loc{background:var(--loc-bg);color:var(--loc-fg)}
.tg-st{background:var(--study-bg);color:var(--study-fg)}
.tg-ev{background:#E0F7FA;color:#00695C;border-left:2px solid #00897B;font-weight:700}
.legend{display:flex;gap:10px;padding:10px 14px;background:#F8FAFC;border-top:1px solid var(--border);flex-wrap:wrap}
.lg{display:flex;align-items:center;gap:4px;font-size:10px;color:var(--text-light)}
.lg-d{width:10px;height:10px;border-radius:3px}

/* Admin */
.admin-only{display:none}
.admin-only.show{display:block}
.sc{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow-sm);overflow:hidden;margin-bottom:16px}
.sc-h{padding:12px 16px;border-bottom:1px solid var(--border);font-weight:600;color:var(--navy);font-size:13px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px}
.sc-b{padding:14px 16px}
.loc-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:8px}
.loc-item{display:flex;align-items:center;gap:8px;padding:8px 10px;border-radius:7px;background:var(--bg)}
.loc-dot{width:8px;height:8px;border-radius:50%}
.loc-name{font-size:12px;font-weight:600}
.loc-count{font-family:Outfit;font-size:17px;font-weight:700;color:var(--navy);margin-left:auto}
table.stbl{width:100%;border-collapse:collapse}
table.stbl th{background:var(--navy);color:#fff;padding:8px;font-size:10px;text-align:center}
table.stbl th:first-child{text-align:left;padding-left:14px}
table.stbl td{padding:8px;border-bottom:1px solid var(--border);font-size:11px;text-align:center}
table.stbl td:first-child{text-align:left;padding-left:14px;font-weight:600}
table.stbl tr:nth-child(even){background:#FAFBFC}
.bar{height:5px;border-radius:3px;background:var(--border);position:relative;min-width:40px}
.bar-f{height:100%;border-radius:3px;position:absolute;left:0;top:0}

/* CSV */
.csv-zone{border:2px dashed var(--border);border-radius:10px;padding:20px;text-align:center;transition:.2s;cursor:pointer;margin-bottom:10px}
.csv-zone:hover,.csv-zone.drag{border-color:var(--accent);background:rgba(58,124,165,.05)}
.csv-zone-icon{font-size:28px;margin-bottom:6px}
.csv-zone-text{font-size:12px;color:var(--text-light)}
.csv-zone-sub{font-size:10px;color:var(--text-light);margin-top:3px}
.csv-status{padding:8px 12px;border-radius:7px;font-size:11px;margin-top:8px;display:none}
.csv-status.ok{display:block;background:var(--early-bg);color:var(--early-fg)}
.csv-status.err{display:block;background:var(--off-bg);color:var(--off-fg)}

/* Modal */
.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.4);z-index:5000;display:flex;align-items:center;justify-content:center;transition:opacity .3s}
.modal-overlay.hidden{opacity:0;pointer-events:none}
.modal{background:#fff;border-radius:14px;padding:22px;width:420px;max-width:92vw;max-height:85vh;overflow-y:auto;box-shadow:var(--shadow-lg)}
.modal-title{font-size:15px;font-weight:700;color:var(--navy);margin-bottom:14px}
.modal-row{margin-bottom:8px}
.modal-label{font-size:10px;font-weight:600;color:var(--text-light);margin-bottom:3px}
.modal-select{width:100%;padding:7px 10px;border:1px solid var(--border);border-radius:6px;font-size:12px;font-family:inherit}
.modal-select:focus{outline:none;border-color:var(--accent)}
.modal-btns{display:flex;gap:8px;margin-top:14px;justify-content:flex-end}
.btn-save-deploy{background:linear-gradient(135deg,#4CAF50,#2E7D32);color:#fff;padding:8px 20px;font-size:12px;font-weight:700;border:none;border-radius:8px;cursor:pointer;transition:.2s;display:inline-flex;align-items:center;gap:6px}
.btn-save-deploy:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(46,125,50,.3)}
.btn-save-deploy:disabled{opacity:.5;cursor:not-allowed;transform:none}
.btn-save-only{background:var(--accent);color:#fff;padding:8px 16px;font-size:12px;font-weight:600;border:none;border-radius:8px;cursor:pointer;transition:.2s}
.btn-save-only:hover{background:var(--accent-light)}

/* Events */
.ev-row{display:flex;gap:6px;align-items:center;margin-bottom:6px;flex-wrap:wrap}
.ev-row input{padding:6px 8px;border:1px solid var(--border);border-radius:6px;font-size:11px;font-family:inherit}
.ev-row input:focus{outline:none;border-color:var(--accent)}
.ev-row input[type=date]{width:130px}
.ev-row input[type=text]{flex:1;min-width:120px}
.ev-item{display:flex;align-items:center;justify-content:space-between;padding:7px 10px;border-radius:6px;background:var(--bg);margin-bottom:5px;font-size:11px}

/* Buttons */
.btn{padding:6px 14px;border:none;border-radius:6px;font-size:11px;font-weight:600;cursor:pointer;transition:.2s;font-family:inherit;display:inline-flex;align-items:center;gap:4px}
.btn-p{background:var(--accent);color:#fff}
.btn-p:hover{background:var(--accent-light)}
.btn-s{background:var(--bg);color:var(--text);border:1px solid var(--border)}
.btn-d{background:var(--off-bg);color:var(--off-fg);border:none;padding:3px 8px;font-size:10px;border-radius:4px;cursor:pointer}

/* Deploy */
.deploy-box{background:linear-gradient(135deg,#E8F5E9,#C8E6C9);border:1px solid #A5D6A7;border-radius:12px;padding:18px;margin-bottom:14px}
.deploy-title{font-size:14px;font-weight:700;color:#1B5E20;margin-bottom:6px}
.deploy-desc{font-size:11px;color:#2E7D32;line-height:1.6;margin-bottom:12px}
.btn-deploy{background:linear-gradient(135deg,#4CAF50,#2E7D32);color:#fff;padding:10px 24px;font-size:13px;font-weight:700;border:none;border-radius:10px;cursor:pointer;transition:.2s;display:inline-flex;align-items:center;gap:8px;width:100%;justify-content:center}
.btn-deploy:hover{transform:translateY(-1px);box-shadow:var(--shadow-md)}
.btn-deploy:disabled{opacity:.5;cursor:not-allowed;transform:none}
.deploy-status{margin-top:10px;padding:10px;border-radius:8px;font-size:12px;display:none}
.deploy-status.ok{display:block;background:#C8E6C9;color:#1B5E20}
.deploy-status.err{display:block;background:#FFCDD2;color:#B71C1C}
.deploy-status.loading{display:block;background:#FFF9C4;color:#F57F17}
.token-section{background:var(--bg);border-radius:8px;padding:12px;margin-bottom:14px}
.token-label{font-size:11px;font-weight:600;color:var(--text-light);margin-bottom:6px}
.token-input{width:100%;padding:8px 12px;border:1px solid var(--border);border-radius:6px;font-size:11px;font-family:monospace}
.token-input:focus{outline:none;border-color:var(--accent)}
.token-hint{font-size:10px;color:var(--text-light);margin-top:4px}
.token-saved{display:inline-block;background:var(--early-bg);color:var(--early-fg);font-size:10px;padding:2px 8px;border-radius:10px;margin-left:6px}
.data-badge{display:inline-block;font-size:9px;padding:2px 8px;border-radius:10px;font-weight:600;margin-left:6px}
.data-badge.has{background:var(--early-bg);color:var(--early-fg)}
.data-badge.no{background:var(--off-bg);color:var(--off-fg)}

/* Auto-deploy info */
.auto-deploy-info{background:linear-gradient(135deg,#E3F2FD,#BBDEFB);border:1px solid #90CAF9;border-radius:10px;padding:12px 16px;margin-bottom:14px;display:flex;align-items:center;gap:10px}
.auto-deploy-info .adi-icon{font-size:20px}
.auto-deploy-info .adi-text{font-size:11px;color:#1565C0;line-height:1.5}
.auto-deploy-info .adi-text strong{color:#0D47A1}

/* Last synced */
.last-synced{font-size:10px;color:var(--text-light);text-align:right;margin-top:6px}
.last-synced strong{color:var(--early-fg)}

/* Toast */
.toast{position:fixed;bottom:20px;right:20px;background:var(--navy);color:#fff;padding:11px 20px;border-radius:var(--radius-sm);font-size:12px;box-shadow:var(--shadow-lg);transform:translateY(100px);opacity:0;transition:.4s cubic-bezier(.22,1,.36,1);z-index:8000}
.toast.show{transform:translateY(0);opacity:1}

@media(max-width:768px){
  .main{padding:12px}
  .cal-c{min-height:70px;padding:3px}
  .tg{font-size:8.5px}
  .stats{grid-template-columns:repeat(2,1fr)}
  .header-inner{padding:10px 14px}
}
</style>
</head>
<body>

<!-- Login Modal -->
<div class="login-overlay hidden" id="loginOv">
<div class="login-box">
<div class="login-logo">B</div>
<div class="login-title">BIBIMAKE</div>
<div class="login-sub">ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³</div>
<form onsubmit="return doLogin()">
<input type="password" class="login-input" id="loginPw" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" autocomplete="off">
<div class="login-error" id="loginErr"></div>
<button type="submit" class="login-btn">ãƒ­ã‚°ã‚¤ãƒ³</button>
</form>
</div></div>

<!-- Edit Modal -->
<div class="modal-overlay hidden" id="editOv">
<div class="modal" id="editModal"><div class="modal-title">âœï¸ 3æœˆ21æ—¥ï¼ˆåœŸï¼‰</div><div class="modal-row"><div class="modal-label"><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#E91E63;margin-right:4px;vertical-align:middle"></span>ã¡ã‹</div><select class="modal-select" id="ed0" onchange="onEd(0,21)"><option value="" selected="">â”€</option><option value="æ—©">æ—©ç•ª</option><option value="é…">é…ç•ª</option><option value="ä¼‘">ä¼‘ã¿</option><option value="å‹‰å¼·ä¼š">å‹‰å¼·ä¼š</option><option value="æ—©æ±äº¬æœ¬éƒ¨">æ—©@æ±äº¬æœ¬éƒ¨</option><option value="æ—©æ–°å®¿">æ—©@æ–°å®¿</option><option value="æ—©æ¨ªæµœ">æ—©@æ¨ªæµœ</option><option value="æ—©å¤§é˜ª">æ—©@å¤§é˜ª</option><option value="æ—©ç¦å²¡">æ—©@ç¦å²¡</option><option value="é…æ±äº¬æœ¬éƒ¨">é…@æ±äº¬æœ¬éƒ¨</option><option value="é…æ–°å®¿">é…@æ–°å®¿</option><option value="é…æ¨ªæµœ">é…@æ¨ªæµœ</option><option value="é…å¤§é˜ª">é…@å¤§é˜ª</option><option value="é…ç¦å²¡">é…@ç¦å²¡</option><option value="æ±äº¬æœ¬éƒ¨">æ±äº¬æœ¬éƒ¨</option><option value="æ–°å®¿">æ–°å®¿</option><option value="æ¨ªæµœ">æ¨ªæµœ</option><option value="å¤§é˜ª">å¤§é˜ª</option><option value="ç¦å²¡">ç¦å²¡</option></select></div><div class="modal-row"><div class="modal-label"><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#9C27B0;margin-right:4px;vertical-align:middle"></span>ã¿ã</div><select class="modal-select" id="ed1" onchange="onEd(1,21)"><option value="" selected="">â”€</option><option value="æ—©">æ—©ç•ª</option><option value="é…">é…ç•ª</option><option value="ä¼‘">ä¼‘ã¿</option><option value="å‹‰å¼·ä¼š">å‹‰å¼·ä¼š</option><option value="æ—©æ±äº¬æœ¬éƒ¨">æ—©@æ±äº¬æœ¬éƒ¨</option><option value="æ—©æ–°å®¿">æ—©@æ–°å®¿</option><option value="æ—©æ¨ªæµœ">æ—©@æ¨ªæµœ</option><option value="æ—©å¤§é˜ª">æ—©@å¤§é˜ª</option><option value="æ—©ç¦å²¡">æ—©@ç¦å²¡</option><option value="é…æ±äº¬æœ¬éƒ¨">é…@æ±äº¬æœ¬éƒ¨</option><option value="é…æ–°å®¿">é…@æ–°å®¿</option><option value="é…æ¨ªæµœ">é…@æ¨ªæµœ</option><option value="é…å¤§é˜ª">é…@å¤§é˜ª</option><option value="é…ç¦å²¡">é…@ç¦å²¡</option><option value="æ±äº¬æœ¬éƒ¨">æ±äº¬æœ¬éƒ¨</option><option value="æ–°å®¿">æ–°å®¿</option><option value="æ¨ªæµœ">æ¨ªæµœ</option><option value="å¤§é˜ª">å¤§é˜ª</option><option value="ç¦å²¡">ç¦å²¡</option></select></div><div class="modal-row"><div class="modal-label"><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#2196F3;margin-right:4px;vertical-align:middle"></span>ãˆã‚Š</div><select class="modal-select" id="ed2" onchange="onEd(2,21)"><option value="" selected="">â”€</option><option value="æ—©">æ—©ç•ª</option><option value="é…">é…ç•ª</option><option value="ä¼‘">ä¼‘ã¿</option><option value="å‹‰å¼·ä¼š">å‹‰å¼·ä¼š</option><option value="æ—©æ±äº¬æœ¬éƒ¨">æ—©@æ±äº¬æœ¬éƒ¨</option><option value="æ—©æ–°å®¿">æ—©@æ–°å®¿</option><option value="æ—©æ¨ªæµœ">æ—©@æ¨ªæµœ</option><option value="æ—©å¤§é˜ª">æ—©@å¤§é˜ª</option><option value="æ—©ç¦å²¡">æ—©@ç¦å²¡</option><option value="é…æ±äº¬æœ¬éƒ¨">é…@æ±äº¬æœ¬éƒ¨</option><option value="é…æ–°å®¿">é…@æ–°å®¿</option><option value="é…æ¨ªæµœ">é…@æ¨ªæµœ</option><option value="é…å¤§é˜ª">é…@å¤§é˜ª</option><option value="é…ç¦å²¡">é…@ç¦å²¡</option><option value="æ±äº¬æœ¬éƒ¨">æ±äº¬æœ¬éƒ¨</option><option value="æ–°å®¿">æ–°å®¿</option><option value="æ¨ªæµœ">æ¨ªæµœ</option><option value="å¤§é˜ª">å¤§é˜ª</option><option value="ç¦å²¡">ç¦å²¡</option></select></div><div class="modal-row"><div class="modal-label"><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#FF9800;margin-right:4px;vertical-align:middle"></span>ã˜ã‚…ã‚“ã“</div><select class="modal-select" id="ed3" onchange="onEd(3,21)"><option value="">â”€</option><option value="æ—©">æ—©ç•ª</option><option value="é…" selected="">é…ç•ª</option><option value="ä¼‘">ä¼‘ã¿</option><option value="å‹‰å¼·ä¼š">å‹‰å¼·ä¼š</option><option value="æ—©æ±äº¬æœ¬éƒ¨">æ—©@æ±äº¬æœ¬éƒ¨</option><option value="æ—©æ–°å®¿">æ—©@æ–°å®¿</option><option value="æ—©æ¨ªæµœ">æ—©@æ¨ªæµœ</option><option value="æ—©å¤§é˜ª">æ—©@å¤§é˜ª</option><option value="æ—©ç¦å²¡">æ—©@ç¦å²¡</option><option value="é…æ±äº¬æœ¬éƒ¨">é…@æ±äº¬æœ¬éƒ¨</option><option value="é…æ–°å®¿">é…@æ–°å®¿</option><option value="é…æ¨ªæµœ">é…@æ¨ªæµœ</option><option value="é…å¤§é˜ª">é…@å¤§é˜ª</option><option value="é…ç¦å²¡">é…@ç¦å²¡</option><option value="æ±äº¬æœ¬éƒ¨">æ±äº¬æœ¬éƒ¨</option><option value="æ–°å®¿">æ–°å®¿</option><option value="æ¨ªæµœ">æ¨ªæµœ</option><option value="å¤§é˜ª">å¤§é˜ª</option><option value="ç¦å²¡">ç¦å²¡</option></select></div><div class="modal-row"><div class="modal-label"><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#4CAF50;margin-right:4px;vertical-align:middle"></span>ã¿ã¿</div><select class="modal-select" id="ed4" onchange="onEd(4,21)"><option value="" selected="">â”€</option><option value="æ—©">æ—©ç•ª</option><option value="é…">é…ç•ª</option><option value="ä¼‘">ä¼‘ã¿</option><option value="å‹‰å¼·ä¼š">å‹‰å¼·ä¼š</option><option value="æ—©æ±äº¬æœ¬éƒ¨">æ—©@æ±äº¬æœ¬éƒ¨</option><option value="æ—©æ–°å®¿">æ—©@æ–°å®¿</option><option value="æ—©æ¨ªæµœ">æ—©@æ¨ªæµœ</option><option value="æ—©å¤§é˜ª">æ—©@å¤§é˜ª</option><option value="æ—©ç¦å²¡">æ—©@ç¦å²¡</option><option value="é…æ±äº¬æœ¬éƒ¨">é…@æ±äº¬æœ¬éƒ¨</option><option value="é…æ–°å®¿">é…@æ–°å®¿</option><option value="é…æ¨ªæµœ">é…@æ¨ªæµœ</option><option value="é…å¤§é˜ª">é…@å¤§é˜ª</option><option value="é…ç¦å²¡">é…@ç¦å²¡</option><option value="æ±äº¬æœ¬éƒ¨">æ±äº¬æœ¬éƒ¨</option><option value="æ–°å®¿">æ–°å®¿</option><option value="æ¨ªæµœ">æ¨ªæµœ</option><option value="å¤§é˜ª">å¤§é˜ª</option><option value="ç¦å²¡">ç¦å²¡</option></select></div><div class="modal-row"><div class="modal-label"><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#00BCD4;margin-right:4px;vertical-align:middle"></span>ã‚†ã‹ã‚Š</div><select class="modal-select" id="ed5" onchange="onEd(5,21)"><option value="" selected="">â”€</option><option value="æ—©">æ—©ç•ª</option><option value="é…">é…ç•ª</option><option value="ä¼‘">ä¼‘ã¿</option><option value="å‹‰å¼·ä¼š">å‹‰å¼·ä¼š</option><option value="æ—©æ±äº¬æœ¬éƒ¨">æ—©@æ±äº¬æœ¬éƒ¨</option><option value="æ—©æ–°å®¿">æ—©@æ–°å®¿</option><option value="æ—©æ¨ªæµœ">æ—©@æ¨ªæµœ</option><option value="æ—©å¤§é˜ª">æ—©@å¤§é˜ª</option><option value="æ—©ç¦å²¡">æ—©@ç¦å²¡</option><option value="é…æ±äº¬æœ¬éƒ¨">é…@æ±äº¬æœ¬éƒ¨</option><option value="é…æ–°å®¿">é…@æ–°å®¿</option><option value="é…æ¨ªæµœ">é…@æ¨ªæµœ</option><option value="é…å¤§é˜ª">é…@å¤§é˜ª</option><option value="é…ç¦å²¡">é…@ç¦å²¡</option><option value="æ±äº¬æœ¬éƒ¨">æ±äº¬æœ¬éƒ¨</option><option value="æ–°å®¿">æ–°å®¿</option><option value="æ¨ªæµœ">æ¨ªæµœ</option><option value="å¤§é˜ª">å¤§é˜ª</option><option value="ç¦å²¡">ç¦å²¡</option></select></div><div class="modal-row"><div class="modal-label"><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#795548;margin-right:4px;vertical-align:middle"></span>ã‘ã„ã“</div><select class="modal-select" id="ed6" onchange="onEd(6,21)"><option value="" selected="">â”€</option><option value="æ—©">æ—©ç•ª</option><option value="é…">é…ç•ª</option><option value="ä¼‘">ä¼‘ã¿</option><option value="å‹‰å¼·ä¼š">å‹‰å¼·ä¼š</option><option value="æ—©æ±äº¬æœ¬éƒ¨">æ—©@æ±äº¬æœ¬éƒ¨</option><option value="æ—©æ–°å®¿">æ—©@æ–°å®¿</option><option value="æ—©æ¨ªæµœ">æ—©@æ¨ªæµœ</option><option value="æ—©å¤§é˜ª">æ—©@å¤§é˜ª</option><option value="æ—©ç¦å²¡">æ—©@ç¦å²¡</option><option value="é…æ±äº¬æœ¬éƒ¨">é…@æ±äº¬æœ¬éƒ¨</option><option value="é…æ–°å®¿">é…@æ–°å®¿</option><option value="é…æ¨ªæµœ">é…@æ¨ªæµœ</option><option value="é…å¤§é˜ª">é…@å¤§é˜ª</option><option value="é…ç¦å²¡">é…@ç¦å²¡</option><option value="æ±äº¬æœ¬éƒ¨">æ±äº¬æœ¬éƒ¨</option><option value="æ–°å®¿">æ–°å®¿</option><option value="æ¨ªæµœ">æ¨ªæµœ</option><option value="å¤§é˜ª">å¤§é˜ª</option><option value="ç¦å²¡">ç¦å²¡</option></select></div><div class="modal-row"><div class="modal-label"><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#F44336;margin-right:4px;vertical-align:middle"></span>ã•ã</div><select class="modal-select" id="ed7" onchange="onEd(7,21)"><option value="" selected="">â”€</option><option value="æ—©">æ—©ç•ª</option><option value="é…">é…ç•ª</option><option value="ä¼‘">ä¼‘ã¿</option><option value="å‹‰å¼·ä¼š">å‹‰å¼·ä¼š</option><option value="æ—©æ±äº¬æœ¬éƒ¨">æ—©@æ±äº¬æœ¬éƒ¨</option><option value="æ—©æ–°å®¿">æ—©@æ–°å®¿</option><option value="æ—©æ¨ªæµœ">æ—©@æ¨ªæµœ</option><option value="æ—©å¤§é˜ª">æ—©@å¤§é˜ª</option><option value="æ—©ç¦å²¡">æ—©@ç¦å²¡</option><option value="é…æ±äº¬æœ¬éƒ¨">é…@æ±äº¬æœ¬éƒ¨</option><option value="é…æ–°å®¿">é…@æ–°å®¿</option><option value="é…æ¨ªæµœ">é…@æ¨ªæµœ</option><option value="é…å¤§é˜ª">é…@å¤§é˜ª</option><option value="é…ç¦å²¡">é…@ç¦å²¡</option><option value="æ±äº¬æœ¬éƒ¨">æ±äº¬æœ¬éƒ¨</option><option value="æ–°å®¿">æ–°å®¿</option><option value="æ¨ªæµœ">æ¨ªæµœ</option><option value="å¤§é˜ª">å¤§é˜ª</option><option value="ç¦å²¡">ç¦å²¡</option></select></div><div class="modal-row"><div class="modal-label"><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#3F51B5;margin-right:4px;vertical-align:middle"></span>ã‚ã„ã‹</div><select class="modal-select" id="ed8" onchange="onEd(8,21)"><option value="" selected="">â”€</option><option value="æ—©">æ—©ç•ª</option><option value="é…">é…ç•ª</option><option value="ä¼‘">ä¼‘ã¿</option><option value="å‹‰å¼·ä¼š">å‹‰å¼·ä¼š</option><option value="æ—©æ±äº¬æœ¬éƒ¨">æ—©@æ±äº¬æœ¬éƒ¨</option><option value="æ—©æ–°å®¿">æ—©@æ–°å®¿</option><option value="æ—©æ¨ªæµœ">æ—©@æ¨ªæµœ</option><option value="æ—©å¤§é˜ª">æ—©@å¤§é˜ª</option><option value="æ—©ç¦å²¡">æ—©@ç¦å²¡</option><option value="é…æ±äº¬æœ¬éƒ¨">é…@æ±äº¬æœ¬éƒ¨</option><option value="é…æ–°å®¿">é…@æ–°å®¿</option><option value="é…æ¨ªæµœ">é…@æ¨ªæµœ</option><option value="é…å¤§é˜ª">é…@å¤§é˜ª</option><option value="é…ç¦å²¡">é…@ç¦å²¡</option><option value="æ±äº¬æœ¬éƒ¨">æ±äº¬æœ¬éƒ¨</option><option value="æ–°å®¿">æ–°å®¿</option><option value="æ¨ªæµœ">æ¨ªæµœ</option><option value="å¤§é˜ª">å¤§é˜ª</option><option value="ç¦å²¡">ç¦å²¡</option></select></div><div class="modal-row"><div class="modal-label"><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#8BC34A;margin-right:4px;vertical-align:middle"></span>ã‚ã‚„ã‹</div><select class="modal-select" id="ed9" onchange="onEd(9,21)"><option value="" selected="">â”€</option><option value="æ—©">æ—©ç•ª</option><option value="é…">é…ç•ª</option><option value="ä¼‘">ä¼‘ã¿</option><option value="å‹‰å¼·ä¼š">å‹‰å¼·ä¼š</option><option value="æ—©æ±äº¬æœ¬éƒ¨">æ—©@æ±äº¬æœ¬éƒ¨</option><option value="æ—©æ–°å®¿">æ—©@æ–°å®¿</option><option value="æ—©æ¨ªæµœ">æ—©@æ¨ªæµœ</option><option value="æ—©å¤§é˜ª">æ—©@å¤§é˜ª</option><option value="æ—©ç¦å²¡">æ—©@ç¦å²¡</option><option value="é…æ±äº¬æœ¬éƒ¨">é…@æ±äº¬æœ¬éƒ¨</option><option value="é…æ–°å®¿">é…@æ–°å®¿</option><option value="é…æ¨ªæµœ">é…@æ¨ªæµœ</option><option value="é…å¤§é˜ª">é…@å¤§é˜ª</option><option value="é…ç¦å²¡">é…@ç¦å²¡</option><option value="æ±äº¬æœ¬éƒ¨">æ±äº¬æœ¬éƒ¨</option><option value="æ–°å®¿">æ–°å®¿</option><option value="æ¨ªæµœ">æ¨ªæµœ</option><option value="å¤§é˜ª">å¤§é˜ª</option><option value="ç¦å²¡">ç¦å²¡</option></select></div><div class="modal-btns"><button class="btn btn-s" onclick="document.getElementById('editOv').classList.add('hidden')">é–‰ã˜ã‚‹</button><button class="btn-save-only" onclick="saveAndClose()">ğŸ’¾ ä¿å­˜ã®ã¿</button><button class="btn-save-deploy" id="btnSaveDeploy" onclick="saveAndDeploy()">ğŸ’¾ ä¿å­˜ï¼†åæ˜ </button></div></div>
</div>

<!-- Header -->
<header class="header"><div class="header-inner">
<div class="logo"><div class="logo-icon">B</div><div><div class="logo-text">BIBIMAKE</div><div class="logo-sub">Shift Calendar</div></div></div>
<div class="nav">
<div class="month-nav">
<button onclick="chgM(-1)">â—€</button>
<span class="m-label" id="mL">2026å¹´ 4æœˆ</span>
<button onclick="chgM(1)">â–¶</button>
</div>
<div class="mode-toggle">
<button class="mode-btn" id="bS" onclick="setMode('staff')">ğŸ“‹ ã‚¹ã‚¿ãƒƒãƒ•</button>
<button class="mode-btn active" id="bA" onclick="reqAdmin()">ğŸ”’ ç®¡ç†è€…<span class="a-badge" id="aB" style="display: inline;">âœ“</span></button>
</div>
<div class="sync-indicator syncing" id="syncInd"><span class="sync-spinner"></span> åæ˜ ä¸­...</div>
<button class="btn-logout" id="logoutBtn" onclick="doLogout()" style="display: inline-block;">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
</div>
</div></header>

<!-- Main Content -->
<main class="main">
<div class="stats" id="stats"><div class="stat"><div class="stat-v">25</div><div class="stat-l">ç¨¼åƒæ—¥</div></div><div class="stat"><div class="stat-v">10</div><div class="stat-l">ã‚¹ã‚¿ãƒƒãƒ•</div></div><div class="stat"><div class="stat-v">21</div><div class="stat-l">æ—©ç•ª</div></div><div class="stat"><div class="stat-v">21</div><div class="stat-l">é…ç•ª</div></div><div class="stat"><div class="stat-v">94</div><div class="stat-l">ç·å‡ºå‹¤</div></div></div>

<div class="cal-card">
<div class="cal-h"><div>æ—¥</div><div>æœˆ</div><div>ç«</div><div>æ°´</div><div>æœ¨</div><div>é‡‘</div><div>åœŸ</div></div>
<div class="cal-g" id="cG"><div class="cal-c empty"></div><div class="cal-c empty"></div><div class="cal-c empty"></div><div class="cal-c editable" onclick="openEdit(1)"><div class="cd"><span>1</span><span class="cd-n">5</span></div><div class="tg tg-l">ğŸŒ™ã¡ã‹</div><div class="tg tg-loc">ğŸ“ã¿ã@æ¨ªæµœ</div><div class="tg tg-loc">ğŸ“ãˆã‚Š@æ–°å®¿</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ±äº¬æœ¬éƒ¨</div><div class="tg tg-e">â˜€ã‚†ã‹ã‚Š</div></div><div class="cal-c editable" onclick="openEdit(2)"><div class="cd"><span>2</span><span class="cd-n">4</span></div><div class="tg tg-o">ã¡ã‹ ä¼‘</div><div class="tg tg-l">ğŸŒ™ã¿ã</div><div class="tg tg-loc">ğŸ“ãˆã‚Š@æ–°å®¿</div><div class="tg tg-o">ã¿ã¿ ä¼‘</div><div class="tg tg-e">â˜€ã‚†ã‹ã‚Š</div><div class="tg tg-loc">ğŸ“ã‘ã„ã“@æ±äº¬æœ¬éƒ¨</div></div><div class="cal-c editable" onclick="openEdit(3)"><div class="cd"><span>3</span><span class="cd-n">5</span></div><div class="tg tg-l">ğŸŒ™ã¡ã‹</div><div class="tg tg-loc">ğŸ“ã¿ã@æ¨ªæµœ</div><div class="tg tg-e">â˜€ãˆã‚Š</div><div class="tg tg-o">ã¿ã¿ ä¼‘</div><div class="tg tg-loc">ğŸ“ã‚†ã‹ã‚Š@æ–°å®¿</div><div class="tg tg-loc">ğŸ“ã‘ã„ã“@æ±äº¬æœ¬éƒ¨</div></div><div class="cal-c sat editable" onclick="openEdit(4)"><div class="cd"><span>4</span><span class="cd-n">5</span></div><div class="tg tg-loc">ğŸ“ã¡ã‹@æ¨ªæµœ</div><div class="tg tg-e">â˜€ã¿ã</div><div class="tg tg-l">ğŸŒ™ã˜ã‚…ã‚“ã“</div><div class="tg tg-o">ã¿ã¿ ä¼‘</div><div class="tg tg-loc">ğŸ“ã‚†ã‹ã‚Š@æ–°å®¿</div><div class="tg tg-loc">ğŸ“ã‘ã„ã“@æ±äº¬æœ¬éƒ¨</div></div><div class="cal-c sun editable" onclick="openEdit(5)"><div class="cd"><span>5</span><span class="cd-n">3</span></div><div class="tg tg-o">ã¡ã‹ ä¼‘</div><div class="tg tg-o">ã¿ã ä¼‘</div><div class="tg tg-e">â˜€ãˆã‚Š</div><div class="tg tg-l">ğŸŒ™ã˜ã‚…ã‚“ã“</div><div class="tg tg-o">ã¿ã¿ ä¼‘</div><div class="tg tg-loc">ğŸ“ã‘ã„ã“@æ±äº¬æœ¬éƒ¨</div></div><div class="cal-c editable" onclick="openEdit(6)"><div class="cd"><span>6</span><span class="cd-n">4</span></div><div class="tg tg-o">ã¡ã‹ ä¼‘</div><div class="tg tg-o">ã¿ã ä¼‘</div><div class="tg tg-l">ğŸŒ™ãˆã‚Š</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ±äº¬æœ¬éƒ¨</div><div class="tg tg-o">ã‚†ã‹ã‚Š ä¼‘</div><div class="tg tg-loc">ğŸ“ã‘ã„ã“@å¤§é˜ª</div><div class="tg tg-e">â˜€ã•ã</div></div><div class="cal-c editable" onclick="openEdit(7)"><div class="cd"><span>7</span><span class="cd-n">5</span></div><div class="tg tg-loc">ğŸ“ã¡ã‹@æ–°å®¿</div><div class="tg tg-e">â˜€ã¿ã</div><div class="tg tg-l">ğŸŒ™ãˆã‚Š</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ±äº¬æœ¬éƒ¨</div><div class="tg tg-o">ã‚†ã‹ã‚Š ä¼‘</div><div class="tg tg-loc">ğŸ“ã‘ã„ã“@å¤§é˜ª</div></div><div class="cal-c editable" onclick="openEdit(8)"><div class="cd"><span>8</span><span class="cd-n">6</span></div><div class="tg tg-l">ğŸŒ™ã¡ã‹</div><div class="tg tg-loc">ğŸ“ã¿ã@æ¨ªæµœ</div><div class="tg tg-loc">ğŸ“ãˆã‚Š@æ–°å®¿</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ±äº¬æœ¬éƒ¨</div><div class="tg tg-o">ã‚†ã‹ã‚Š ä¼‘</div><div class="tg tg-loc">ğŸ“ã‘ã„ã“@å¤§é˜ª</div><div class="tg tg-e">â˜€ã•ã</div></div><div class="cal-c editable" onclick="openEdit(9)"><div class="cd"><span>9</span><span class="cd-n">5</span></div><div class="tg tg-o">ã¡ã‹ ä¼‘</div><div class="tg tg-l">ğŸŒ™ã¿ã</div><div class="tg tg-loc">ğŸ“ãˆã‚Š@æ–°å®¿</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ±äº¬æœ¬éƒ¨</div><div class="tg tg-o">ã‚†ã‹ã‚Š ä¼‘</div><div class="tg tg-loc">ğŸ“ã‘ã„ã“@å¤§é˜ª</div><div class="tg tg-e">â˜€ã•ã</div></div><div class="cal-c editable" onclick="openEdit(10)"><div class="cd"><span>10</span></div></div><div class="cal-c sat editable" onclick="openEdit(11)"><div class="cd"><span>11</span></div></div><div class="cal-c sun editable" onclick="openEdit(12)"><div class="cd"><span>12</span><span class="cd-n">3</span></div><div class="tg tg-o">ã¡ã‹ ä¼‘</div><div class="tg tg-e">â˜€ã¿ã</div><div class="tg tg-l">ğŸŒ™ã˜ã‚…ã‚“ã“</div><div class="tg tg-o">ã‚†ã‹ã‚Š ä¼‘</div><div class="tg tg-loc">ğŸ“ã‘ã„ã“@æ±äº¬æœ¬éƒ¨</div></div><div class="cal-c editable" onclick="openEdit(13)"><div class="cd"><span>13</span><span class="cd-n">4</span></div><div class="tg tg-o">ã¡ã‹ ä¼‘</div><div class="tg tg-o">ã¿ã ä¼‘</div><div class="tg tg-l">ğŸŒ™ã˜ã‚…ã‚“ã“</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ¨ªæµœ</div><div class="tg tg-o">ã‚†ã‹ã‚Š ä¼‘</div><div class="tg tg-loc">ğŸ“ã‘ã„ã“@æ±äº¬æœ¬éƒ¨</div><div class="tg tg-e">â˜€ã•ã</div></div><div class="cal-c editable" onclick="openEdit(14)"><div class="cd"><span>14</span><span class="cd-n">4</span></div><div class="tg tg-l">ğŸŒ™ã¿ã</div><div class="tg tg-loc">ğŸ“ãˆã‚Š@æ–°å®¿</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ±äº¬æœ¬éƒ¨</div><div class="tg tg-e">â˜€ã‚†ã‹ã‚Š</div></div><div class="cal-c editable" onclick="openEdit(15)"><div class="cd"><span>15</span><span class="cd-n">3</span></div><div class="tg tg-loc">ğŸ“ã¡ã‹@æ–°å®¿</div><div class="tg tg-l">ğŸŒ™ã˜ã‚…ã‚“ã“</div><div class="tg tg-e">â˜€ã‚†ã‹ã‚Š</div></div><div class="cal-c editable" onclick="openEdit(16)"><div class="cd"><span>16</span><span class="cd-n">1</span></div><div class="tg tg-o">ã¡ã‹ ä¼‘</div><div class="tg tg-e">â˜€ã‚†ã‹ã‚Š</div></div><div class="cal-c editable" onclick="openEdit(17)"><div class="cd"><span>17</span><span class="cd-n">2</span></div><div class="tg tg-loc">ğŸ“ã¿ã@æ¨ªæµœ</div><div class="tg tg-st">ğŸ“–ã¿ã¿</div><div class="tg tg-loc">ğŸ“ã‚†ã‹ã‚Š@æ–°å®¿</div><div class="tg tg-st">ğŸ“–ã‘ã„ã“</div><div class="tg tg-st">ğŸ“–ã•ã</div></div><div class="cal-c sat editable" onclick="openEdit(18)"><div class="cd"><span>18</span><span class="cd-n">3</span></div><div class="tg tg-loc">ğŸ“ã¡ã‹@æ¨ªæµœ</div><div class="tg tg-o">ãˆã‚Š ä¼‘</div><div class="tg tg-l">ğŸŒ™ã˜ã‚…ã‚“ã“</div><div class="tg tg-loc">ğŸ“ã‚†ã‹ã‚Š@æ–°å®¿</div></div><div class="cal-c sun editable" onclick="openEdit(19)"><div class="cd"><span>19</span></div><div class="tg tg-o">ã¡ã‹ ä¼‘</div><div class="tg tg-o">ãˆã‚Š ä¼‘</div></div><div class="cal-c editable" onclick="openEdit(20)"><div class="cd"><span>20</span><span class="cd-n">3</span></div><div class="tg tg-o">ã¡ã‹ ä¼‘</div><div class="tg tg-o">ã¿ã ä¼‘</div><div class="tg tg-l">ğŸŒ™ã˜ã‚…ã‚“ã“</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ±äº¬æœ¬éƒ¨</div><div class="tg tg-e">â˜€ã‚†ã‹ã‚Š</div></div><div class="cal-c editable" onclick="openEdit(21)"><div class="cd"><span>21</span><span class="cd-n">4</span></div><div class="tg tg-e">â˜€ã¡ã‹</div><div class="tg tg-st">ğŸ“–ã¿ã</div><div class="tg tg-l">ğŸŒ™ãˆã‚Š</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ±äº¬æœ¬éƒ¨</div><div class="tg tg-loc">ğŸ“ã‚†ã‹ã‚Š@æ–°å®¿</div></div><div class="cal-c editable" onclick="openEdit(22)"><div class="cd"><span>22</span><span class="cd-n">5</span></div><div class="tg tg-o">ã¡ã‹ ä¼‘</div><div class="tg tg-loc">ğŸ“ã¿ã@æ¨ªæµœ</div><div class="tg tg-loc">ğŸ“ãˆã‚Š@æ–°å®¿</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ±äº¬æœ¬éƒ¨</div><div class="tg tg-e">â˜€ã‚†ã‹ã‚Š</div><div class="tg tg-l">ğŸŒ™ã•ã</div></div><div class="cal-c editable" onclick="openEdit(23)"><div class="cd"><span>23</span><span class="cd-n">4</span></div><div class="tg tg-loc">ğŸ“ã¡ã‹@æ–°å®¿</div><div class="tg tg-l">ğŸŒ™ã¿ã</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ±äº¬æœ¬éƒ¨</div><div class="tg tg-e">â˜€ã‚†ã‹ã‚Š</div></div><div class="cal-c editable" onclick="openEdit(24)"><div class="cd"><span>24</span><span class="cd-n">5</span></div><div class="tg tg-l">ğŸŒ™ã¡ã‹</div><div class="tg tg-loc">ğŸ“ã¿ã@æ¨ªæµœ</div><div class="tg tg-e">â˜€ãˆã‚Š</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ±äº¬æœ¬éƒ¨</div><div class="tg tg-loc">ğŸ“ã‚†ã‹ã‚Š@æ–°å®¿</div></div><div class="cal-c sat editable" onclick="openEdit(25)"><div class="cd"><span>25</span></div></div><div class="cal-c sun editable" onclick="openEdit(26)"><div class="cd"><span>26</span></div><div class="tg tg-o">ã¡ã‹ ä¼‘</div></div><div class="cal-c editable" onclick="openEdit(27)"><div class="cd"><span>27</span><span class="cd-n">4</span></div><div class="tg tg-o">ã¡ã‹ ä¼‘</div><div class="tg tg-o">ã¿ã ä¼‘</div><div class="tg tg-l">ğŸŒ™ã˜ã‚…ã‚“ã“</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ¨ªæµœ</div><div class="tg tg-e">â˜€ã‚†ã‹ã‚Š</div><div class="tg tg-loc">ğŸ“ã‘ã„ã“@å¤§é˜ª</div></div><div class="cal-c editable" onclick="openEdit(28)"><div class="cd"><span>28</span><span class="cd-n">1</span></div><div class="tg tg-loc">ğŸ“ã‚†ã‹ã‚Š@æ–°å®¿</div></div><div class="cal-c editable" onclick="openEdit(29)"><div class="cd"><span>29</span><span class="cd-n">2</span></div><div class="tg tg-loc">ğŸ“ã¡ã‹@æ¨ªæµœ</div><div class="tg tg-loc">ğŸ“ã‚†ã‹ã‚Š@æ–°å®¿</div></div><div class="cal-c editable" onclick="openEdit(30)"><div class="cd"><span>30</span><span class="cd-n">4</span></div><div class="tg tg-o">ã¡ã‹ ä¼‘</div><div class="tg tg-l">ğŸŒ™ã¿ã</div><div class="tg tg-loc">ğŸ“ã¿ã¿@æ±äº¬æœ¬éƒ¨</div><div class="tg tg-e">â˜€ã‚†ã‹ã‚Š</div><div class="tg tg-loc">ğŸ“ã‘ã„ã“@å¤§é˜ª</div></div></div>
<div class="legend" id="leg"><div class="lg"><div class="lg-d" style="background:var(--early-bg);border:1px solid #81C784"></div>æ—©ç•ª</div><div class="lg"><div class="lg-d" style="background:var(--late-bg);border:1px solid #FFB74D"></div>é…ç•ª</div><div class="lg"><div class="lg-d" style="background:var(--loc-bg);border:1px solid #64B5F6"></div>æ•™å®¤</div><div class="lg"><div class="lg-d" style="background:var(--study-bg);border:1px solid #BA68C8"></div>å‹‰å¼·ä¼š</div><div class="lg"><div class="lg-d" style="background:var(--off-bg);border:1px solid #EF9A9A"></div>ä¼‘ã¿</div><div class="lg"><div class="lg-d" style="background:var(--event-bg);border:1px solid #4DB6AC"></div>ã‚¤ãƒ™ãƒ³ãƒˆ</div><div class="lg" style="margin-left:auto;font-weight:600;color:var(--accent)">ğŸ“ æ—¥ä»˜ã‚¯ãƒªãƒƒã‚¯â†’ç·¨é›†</div></div>
</div>

<!-- Admin Only Sections -->
<div class="admin-only show" id="adminS">

<!-- Auto Deploy Info -->
<div class="auto-deploy-info">
<div class="adi-icon">âš¡</div>
<div class="adi-text">
<strong>è‡ªå‹•åæ˜ ãƒ¢ãƒ¼ãƒ‰</strong><br>
ã‚·ãƒ•ãƒˆç·¨é›†ã®ã€ŒğŸ’¾ ä¿å­˜ï¼†åæ˜ ã€ã‚„CSVèª­ã¿è¾¼ã¿ã§è‡ªå‹•çš„ã«ã‚µã‚¤ãƒˆãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚<br>
æ‰‹å‹•ã§åæ˜ ã—ãŸã„å ´åˆã¯ä¸‹ã®ã€ŒğŸš€ æ‰‹å‹•åæ˜ ã€ã‚‚ä½¿ãˆã¾ã™ã€‚
</div>
</div>

<!-- GitHub Deploy -->
<div class="sc"><div class="sc-h"><span>ğŸš€ ã‚µã‚¤ãƒˆåæ˜ è¨­å®š</span><span class="last-synced" id="lastSynced">æœ€çµ‚åæ˜ : <strong>2026/2/20 20:54:59</strong></span></div><div class="sc-b">

<div class="token-section">
<div class="token-label">ğŸ”‘ GitHub Token <span class="token-saved" id="tokenSaved" style="display: inline;">è¨­å®šæ¸ˆã¿</span></div>
<input type="password" class="token-input" id="ghToken" placeholder="ghp_xxxxx...">
<div class="token-hint">åˆå›ã®ã¿å…¥åŠ›ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã«å®‰å…¨ã«ä¿å­˜ã•ã‚Œã¾ã™ï¼ˆHTMLã«ã¯å«ã¾ã‚Œã¾ã›ã‚“ï¼‰</div>
<button class="btn btn-s" style="margin-top:8px" onclick="saveToken()">ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿å­˜</button>
</div>

<div class="deploy-box">
<div class="deploy-title">ğŸ”§ æ‰‹å‹•åæ˜ </div>
<div class="deploy-desc">è‡ªå‹•åæ˜ ãŒã†ã¾ãã„ã‹ãªã„å ´åˆã‚„ã€ç¢ºèªã—ã¦ã‹ã‚‰åæ˜ ã—ãŸã„å ´åˆã«ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚</div>
<button class="btn-deploy" id="deployBtn" onclick="deployToGitHub()" disabled="">ğŸš€ æ‰‹å‹•ã§åæ˜ ã™ã‚‹</button>
<div class="deploy-status ok" id="deploySt">âœ… åæ˜ å®Œäº†ï¼1ã€œ2åˆ†ã§ã‚µã‚¤ãƒˆãŒæ›´æ–°ã•ã‚Œã¾ã™</div>
</div>

</div></div>

<!-- CSV Import -->
<div class="sc"><div class="sc-h"><span>ğŸ“¥ CSVãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿</span><span class="data-badge has" id="dataBadge">ãƒ‡ãƒ¼ã‚¿ã‚ã‚Š</span></div><div class="sc-b">
<div class="csv-zone" id="csvZone" onclick="document.getElementById('csvFile').click()">
<div class="csv-zone-icon">ğŸ“„</div>
<div class="csv-zone-text">CSVã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ— or ã‚¯ãƒªãƒƒã‚¯</div>
<div class="csv-zone-sub">èª­ã¿è¾¼ã¿å¾Œã€è‡ªå‹•ã§ã‚µã‚¤ãƒˆã«åæ˜ ã•ã‚Œã¾ã™ âš¡</div>
</div>
<input type="file" id="csvFile" accept=".csv" style="display:none" onchange="handleCSV(this.files[0])">
<div class="csv-status ok" id="csvSt">âœ… 2026å¹´4æœˆï¼ˆ10åï¼‰èª­ã¿è¾¼ã¿å®Œäº† â†’ è‡ªå‹•åæ˜ ä¸­...</div>
</div></div>

<!-- Location Stats -->
<div class="sc"><div class="sc-h">ğŸ“ æ•™å®¤åˆ¥ æœˆé–“å‡ºå‹¤äººæ•°</div><div class="sc-b"><div class="loc-grid" id="locG"><div class="loc-item"><div class="loc-dot" style="background:#4A90D9"></div><div class="loc-name">æ±äº¬æœ¬éƒ¨</div><div class="loc-count">18</div></div><div class="loc-item"><div class="loc-dot" style="background:#7B68EE"></div><div class="loc-name">æ–°å®¿</div><div class="loc-count">17</div></div><div class="loc-item"><div class="loc-dot" style="background:#20B2AA"></div><div class="loc-name">æ¨ªæµœ</div><div class="loc-count">11</div></div><div class="loc-item"><div class="loc-dot" style="background:#FF7F50"></div><div class="loc-name">å¤§é˜ª</div><div class="loc-count">6</div></div><div class="loc-item"><div class="loc-dot" style="background:#DA70D6"></div><div class="loc-name">ç¦å²¡</div><div class="loc-count">0</div></div></div></div></div>

<!-- Staff Summary -->
<div class="sc"><div class="sc-h">ğŸ‘¥ ã‚¹ã‚¿ãƒƒãƒ•åˆ¥ã‚µãƒãƒªãƒ¼</div><div class="sc-b" style="padding:0;overflow-x:auto"><table class="stbl" id="sTbl"><thead><tr><th>ã‚¹ã‚¿ãƒƒãƒ•</th><th>å‡ºå‹¤</th><th>æ—©ç•ª</th><th>é…ç•ª</th><th>å‹‰å¼·ä¼š</th><th>ç¨¼åƒ</th></tr></thead><tbody><tr><td><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#E91E63;margin-right:5px;vertical-align:middle"></span>ã¡ã‹</td><td><strong>11</strong></td><td style="color:var(--early-fg)">1</td><td style="color:var(--late-fg)">4</td><td style="color:var(--study-fg)">0</td><td><div class="bar"><div class="bar-f" style="width:61%;background:#E91E63"></div></div></td></tr><tr><td><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#9C27B0;margin-right:5px;vertical-align:middle"></span>ã¿ã</td><td><strong>14</strong></td><td style="color:var(--early-fg)">3</td><td style="color:var(--late-fg)">5</td><td style="color:var(--study-fg)">1</td><td><div class="bar"><div class="bar-f" style="width:78%;background:#9C27B0"></div></div></td></tr><tr><td><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#2196F3;margin-right:5px;vertical-align:middle"></span>ãˆã‚Š</td><td><strong>12</strong></td><td style="color:var(--early-fg)">3</td><td style="color:var(--late-fg)">3</td><td style="color:var(--study-fg)">0</td><td><div class="bar"><div class="bar-f" style="width:67%;background:#2196F3"></div></div></td></tr><tr><td><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#FF9800;margin-right:5px;vertical-align:middle"></span>ã˜ã‚…ã‚“ã“</td><td><strong>8</strong></td><td style="color:var(--early-fg)">0</td><td style="color:var(--late-fg)">8</td><td style="color:var(--study-fg)">0</td><td><div class="bar"><div class="bar-f" style="width:44%;background:#FF9800"></div></div></td></tr><tr><td><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#4CAF50;margin-right:5px;vertical-align:middle"></span>ã¿ã¿</td><td><strong>14</strong></td><td style="color:var(--early-fg)">0</td><td style="color:var(--late-fg)">0</td><td style="color:var(--study-fg)">1</td><td><div class="bar"><div class="bar-f" style="width:78%;background:#4CAF50"></div></div></td></tr><tr><td><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#00BCD4;margin-right:5px;vertical-align:middle"></span>ã‚†ã‹ã‚Š</td><td><strong>18</strong></td><td style="color:var(--early-fg)">10</td><td style="color:var(--late-fg)">0</td><td style="color:var(--study-fg)">0</td><td><div class="bar"><div class="bar-f" style="width:100%;background:#00BCD4"></div></div></td></tr><tr><td><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#795548;margin-right:5px;vertical-align:middle"></span>ã‘ã„ã“</td><td><strong>12</strong></td><td style="color:var(--early-fg)">0</td><td style="color:var(--late-fg)">0</td><td style="color:var(--study-fg)">1</td><td><div class="bar"><div class="bar-f" style="width:67%;background:#795548"></div></div></td></tr><tr><td><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#F44336;margin-right:5px;vertical-align:middle"></span>ã•ã</td><td><strong>5</strong></td><td style="color:var(--early-fg)">4</td><td style="color:var(--late-fg)">1</td><td style="color:var(--study-fg)">1</td><td><div class="bar"><div class="bar-f" style="width:28%;background:#F44336"></div></div></td></tr><tr><td><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#3F51B5;margin-right:5px;vertical-align:middle"></span>ã‚ã„ã‹</td><td><strong>0</strong></td><td style="color:var(--early-fg)">0</td><td style="color:var(--late-fg)">0</td><td style="color:var(--study-fg)">0</td><td><div class="bar"><div class="bar-f" style="width:0%;background:#3F51B5"></div></div></td></tr><tr><td><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:#8BC34A;margin-right:5px;vertical-align:middle"></span>ã‚ã‚„ã‹</td><td><strong>0</strong></td><td style="color:var(--early-fg)">0</td><td style="color:var(--late-fg)">0</td><td style="color:var(--study-fg)">0</td><td><div class="bar"><div class="bar-f" style="width:0%;background:#8BC34A"></div></div></td></tr></tbody></table></div></div>

<!-- Event Management -->
<div class="sc"><div class="sc-h">ğŸŒ ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†</div><div class="sc-b">
<div class="ev-row">
<input type="date" id="evD">
<input type="text" id="evT" placeholder="ã‚¤ãƒ™ãƒ³ãƒˆåï¼ˆä¾‹ï¼šå‹‰å¼·ä¼šã€ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ç ”ä¿®ï¼‰">
<button class="btn btn-p" onclick="addEv()">ï¼‹è¿½åŠ </button>
</div>
<div id="evList"><div style="color:var(--text-light);font-size:11px">ã‚¤ãƒ™ãƒ³ãƒˆãªã—</div></div>
</div></div>

</div><!-- /admin-only -->
</main>

<div class="toast show" id="toast">ğŸ“¥ 4æœˆã‚·ãƒ•ãƒˆèª­ã¿è¾¼ã¿å®Œäº†</div>

<script>
// ===== CONFIG =====
var ST=["ã¡ã‹","ã¿ã","ãˆã‚Š","ã˜ã‚…ã‚“ã“","ã¿ã¿","ã‚†ã‹ã‚Š","ã‘ã„ã“","ã•ã","ã‚ã„ã‹","ã‚ã‚„ã‹"];
var SC=["#E91E63","#9C27B0","#2196F3","#FF9800","#4CAF50","#00BCD4","#795548","#F44336","#3F51B5","#8BC34A"];
var LOCS=["æ±äº¬æœ¬éƒ¨","æ–°å®¿","æ¨ªæµœ","å¤§é˜ª","ç¦å²¡"];
var LC=["#4A90D9","#7B68EE","#20B2AA","#FF7F50","#DA70D6"];
var DW=["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"];
var PW="bibi";
var GH_OWNER="eyebrowartistmimi-rgb";
var GH_REPO="bibimake-shift";
var GH_FILE="index.html";
var GH_BRANCH="main";
var LS_DATA="bibimake_data";
var LS_TOKEN="bibimake_gh_token";
var LS_LASTSYNC="bibimake_last_sync";

var cY=2026, cM=3, isA=false, mode="staff", allData={}, events={};
var isDeploying=false;

// ===== EMBEDDED SHIFT DATA (auto-updated by deploy) =====
/*@@DATA_START@@*/
var INIT_DATA={"2026-03":{"ã¡ã‹":["","","æ–°å®¿","","","","","","","æ—©","","","","","","","æ–°å®¿","æ—©","","æ—©","","","","æ—©","æ–°å®¿","","æ–°å®¿","","","","æ–°å®¿"],"ã¿ã":["é…","","æ—©","æ¨ªæµœ","","","é…","é…","","æ¨ªæµœ","æ¨ªæµœ","é…","","","é…","æ—©","æ—©","","","","","","","é…","æ¨ªæµœ","é…","æ¨ªæµœ","","","","æ¨ªæµœ"],"ãˆã‚Š":["","æ¨ªæµœ","é…","å‹‰å¼·ä¼š","","","","","æ—©","é…","æ—©","","","","","æ¨ªæµœ","é…","","","","","","æ¨ªæµœ","æ–°å®¿","æ—©","","æ–°å®¿","","","é…","é…"],"ã˜ã‚…ã‚“ã“":["","é…","","","","","","","é…","","","","","","","é…","","","","","é…","","é…","","","","","","","",""],"ã¿ã¿":["ä¼‘","å¤§é˜ª","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","","","ä¼‘","","å¤§é˜ª","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","","","ä¼‘","å‹‰å¼·ä¼š","æ±äº¬æœ¬éƒ¨","","","å‹‰å¼·ä¼š","","","å‹‰å¼·ä¼š","æ±äº¬æœ¬éƒ¨","é…","æ±äº¬æœ¬éƒ¨","é…","","","æ¨ªæµœ","æ±äº¬æœ¬éƒ¨"],"ã‚†ã‹ã‚Š":["","æ—©","","æ–°å®¿","","","æ–°å®¿","","ä¼‘","æ–°å®¿","æ–°å®¿","æ–°å®¿","","","","ä¼‘","","","ä¼‘","","","æ—©","","æ±äº¬æœ¬éƒ¨","","","","","","æ—©",""],"ã‘ã„ã“":["æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","","å‹‰å¼·ä¼š","","","æ¨ªæµœ","æ±äº¬æœ¬éƒ¨","æ¨ªæµœ","","é…","","","","æ±äº¬æœ¬éƒ¨","","","","","å‹‰å¼·ä¼š","","","å¤§é˜ª","å¤§é˜ª","å¤§é˜ª","æ—©","æ—©","","","æ±äº¬æœ¬éƒ¨","æ—©"],"ã•ã":["","","","é…","","","æ±äº¬æœ¬éƒ¨","æ—©","æ±äº¬æœ¬éƒ¨","","","","","","","","","","","å‹‰å¼·ä¼š","","","","","","","","","","",""],"ã‚ã„ã‹":["æ—©","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"ã‚ã‚„ã‹":["","","","æ—©","","","æ—©","","","","","æ—©","","","æ—©","","","","","å‹‰å¼·ä¼š","","","","","","","","","","",""]},"2026-04":{"ã¡ã‹":["é…","ä¼‘","é…","æ¨ªæµœ","ä¼‘","ä¼‘","æ–°å®¿","é…","ä¼‘","","","ä¼‘","ä¼‘","","æ–°å®¿","ä¼‘","","æ¨ªæµœ","ä¼‘","ä¼‘","æ—©","ä¼‘","æ–°å®¿","é…","","ä¼‘","ä¼‘","","æ¨ªæµœ","ä¼‘"],"ã¿ã":["æ¨ªæµœ","é…","æ¨ªæµœ","æ—©","ä¼‘","ä¼‘","æ—©","æ¨ªæµœ","é…","","","æ—©","ä¼‘","é…","","","æ¨ªæµœ","","","ä¼‘","å‹‰å¼·ä¼š","æ¨ªæµœ","é…","æ¨ªæµœ","","","ä¼‘","","","é…"],"ãˆã‚Š":["æ–°å®¿","æ–°å®¿","æ—©","","æ—©","é…","é…","æ–°å®¿","æ–°å®¿","","","","","æ–°å®¿","","","","ä¼‘","ä¼‘","","é…","æ–°å®¿","","æ—©","","","","","",""],"ã˜ã‚…ã‚“ã“":["","","","é…","é…","","","","","","","é…","é…","","é…","","","é…","","é…","","","","","","","é…","","",""],"ã¿ã¿":["æ±äº¬æœ¬éƒ¨","ä¼‘","ä¼‘","ä¼‘","ä¼‘","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","","","","æ¨ªæµœ","æ±äº¬æœ¬éƒ¨","","","å‹‰å¼·ä¼š","","","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","","","æ¨ªæµœ","","","æ±äº¬æœ¬éƒ¨"],"ã‚†ã‹ã‚Š":["æ—©","æ—©","æ–°å®¿","æ–°å®¿","","ä¼‘","ä¼‘","ä¼‘","ä¼‘","","","ä¼‘","ä¼‘","æ—©","æ—©","æ—©","æ–°å®¿","æ–°å®¿","","æ—©","æ–°å®¿","æ—©","æ—©","æ–°å®¿","","","æ—©","æ–°å®¿","æ–°å®¿","æ—©"],"ã‘ã„ã“":["","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","å¤§é˜ª","å¤§é˜ª","å¤§é˜ª","å¤§é˜ª","","","æ±äº¬æœ¬éƒ¨","æ±äº¬æœ¬éƒ¨","","","","å‹‰å¼·ä¼š","","","","","","","","","","å¤§é˜ª","","","å¤§é˜ª"],"ã•ã":["","","","","","æ—©","","æ—©","æ—©","","","","æ—©","","","","å‹‰å¼·ä¼š","","","","","é…","","","","","","","",""],"ã‚ã„ã‹":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"ã‚ã‚„ã‹":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}};
var INIT_EVENTS={"2026-03-05":["æ±äº¬è¬›ç¿’â‘ "],"2026-03-06":["æ±äº¬è¬›ç¿’â‘¡"],"2026-03-13":["BAT"],"2026-03-14":["BBT"],"2026-03-18":["ç¦å²¡è¬›ç¿’â‘ "],"2026-03-19":["ç¦å²¡è¬›ç¿’â‘¡"],"2026-03-21":["å¤§é˜ªè¬›ç¿’â‘ ","å¤§é˜ªè¬›ç¿’â‘¡"],"2026-03-28":["æ±äº¬è¬›ç¿’â‘ "],"2026-03-29":["æ±äº¬è¬›ç¿’â‘¡"],"2026-03-22":["å¤§é˜ªè¬›ç¿’â‘¡"]};
/*@@DATA_END@@*/

// ===== LOCAL STORAGE =====
function saveLocal(){
  try{localStorage.setItem(LS_DATA,JSON.stringify({a:allData,e:events}))}catch(e){}
}
function loadLocal(){
  try{
    var s=localStorage.getItem(LS_DATA);
    if(s){var d=JSON.parse(s);allData=d.a||{};events=d.e||{};return true}
  }catch(e){}
  return false;
}

// Initialize
if(!loadLocal()){
  allData=JSON.parse(JSON.stringify(INIT_DATA));
  events=JSON.parse(JSON.stringify(INIT_EVENTS));
}

// Load saved token
(function(){
  var t=localStorage.getItem(LS_TOKEN);
  if(t){
    document.addEventListener("DOMContentLoaded",function(){
      var el=document.getElementById("ghToken");if(el)el.value=t;
      var sv=document.getElementById("tokenSaved");if(sv)sv.style.display="inline";
    });
  }
  // Show last sync time
  var ls=localStorage.getItem(LS_LASTSYNC);
  if(ls){
    document.addEventListener("DOMContentLoaded",function(){
      updateLastSynced(ls);
    });
  }
})();

// ===== DATA HELPERS =====
function mKey(){return cY+"-"+String(cM).padStart(2,"0")}
function gV(n,d){return allData[mKey()]?.[n]?.[d-1]||""}
function sV(n,d,v){
  var k=mKey();
  if(!allData[k])allData[k]={};
  if(!allData[k][n])allData[k][n]=Array(new Date(cY,cM,0).getDate()).fill("");
  allData[k][n][d-1]=v;
  saveLocal();
}
function classify(v){
  if(!v)return null;
  if(v==="æ—©")return{t:"e"};if(v==="é…")return{t:"l"};
  if(v==="ä¼‘")return{t:"o"};if(v==="å‹‰å¼·ä¼š")return{t:"s"};
  if(v.startsWith("æ—©"))return{t:"e",loc:v.slice(1)};
  if(v.startsWith("é…"))return{t:"l",loc:v.slice(1)};
  if(LOCS.includes(v))return{t:"loc",loc:v};
  return{t:"loc",loc:v};
}
function getEv(d){return events[mKey()+"-"+String(d).padStart(2,"0")]||[]}
function hasData(){return!!allData[mKey()]}

// ===== SYNC INDICATOR =====
function showSync(state,msg){
  var el=document.getElementById("syncInd");
  el.className="sync-indicator "+state;
  if(state==="syncing"){
    el.innerHTML='<span class="sync-spinner"></span> '+msg;
  }else{
    el.innerHTML=msg;
  }
  if(state==="synced"){
    setTimeout(function(){el.className="sync-indicator";el.innerHTML=""},5000);
  }
}

function updateLastSynced(timeStr){
  var el=document.getElementById("lastSynced");
  if(el)el.innerHTML='æœ€çµ‚åæ˜ : <strong>'+timeStr+'</strong>';
}

// ===== AUTH =====
function reqAdmin(){
  if(isA){setMode("admin");return}
  document.getElementById("loginOv").classList.remove("hidden");
  document.getElementById("loginPw").value="";
  document.getElementById("loginErr").textContent="";
  setTimeout(function(){document.getElementById("loginPw").focus()},100);
}
function doLogin(){
  if(document.getElementById("loginPw").value===PW){
    isA=true;
    document.getElementById("loginOv").classList.add("hidden");
    document.getElementById("aB").style.display="inline";
    document.getElementById("logoutBtn").style.display="inline-block";
    setMode("admin");toast("âœ… ãƒ­ã‚°ã‚¤ãƒ³å®Œäº†");
  }else{
    document.getElementById("loginPw").classList.add("shake");
    document.getElementById("loginErr").textContent="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™";
    setTimeout(function(){document.getElementById("loginPw").classList.remove("shake")},400);
  }
  return false;
}
function doLogout(){
  isA=false;
  document.getElementById("aB").style.display="none";
  document.getElementById("logoutBtn").style.display="none";
  setMode("staff");toast("ğŸ”’ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ");
}
document.addEventListener("keydown",function(e){
  if(e.key==="Escape"){
    document.getElementById("loginOv").classList.add("hidden");
    document.getElementById("editOv").classList.add("hidden");
  }
});
["loginOv","editOv"].forEach(function(id){
  document.getElementById(id).addEventListener("click",function(e){
    if(e.target===e.currentTarget)e.currentTarget.classList.add("hidden");
  });
});
function setMode(m){
  if(m==="admin"&&!isA){reqAdmin();return}
  mode=m;
  document.getElementById("bS").classList.toggle("active",m==="staff");
  document.getElementById("bA").classList.toggle("active",m==="admin");
  document.getElementById("adminS").classList.toggle("show",m==="admin");
  render();
}
function chgM(d){cM+=d;if(cM>12){cM=1;cY++}if(cM<1){cM=12;cY--}render()}

// ===== GITHUB TOKEN =====
function saveToken(){
  var t=document.getElementById("ghToken").value.trim();
  if(!t){toast("âš ï¸ ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¥åŠ›");return}
  localStorage.setItem(LS_TOKEN,t);
  document.getElementById("tokenSaved").style.display="inline";
  toast("ğŸ”‘ ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜å®Œäº†");
}
function getToken(){
  return document.getElementById("ghToken").value.trim()||localStorage.getItem(LS_TOKEN)||"";
}

// ===== GITHUB DEPLOY (shared function) =====
async function deployToGitHub(silent){
  if(isDeploying)return;
  var token=getToken();
  if(!token){
    if(!silent)toast("âš ï¸ GitHubãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
    showSync("error","âš ï¸ ãƒˆãƒ¼ã‚¯ãƒ³æœªè¨­å®š");
    return;
  }

  isDeploying=true;
  var btn=document.getElementById("deployBtn");
  var st=document.getElementById("deploySt");
  btn.disabled=true;
  showSync("syncing","åæ˜ ä¸­...");
  if(!silent){btn.textContent="â³ åæ˜ ä¸­...";st.className="deploy-status loading";st.textContent="ğŸ“¡ GitHubã«æ¥ç¶šä¸­...";}

  try{
    var newHTML=buildDeployHTML();
    var content=btoa(unescape(encodeURIComponent(newHTML)));

    // Get current file SHA
    var getRes=await fetch(
      "https://api.github.com/repos/"+GH_OWNER+"/"+GH_REPO+"/contents/"+GH_FILE+"?ref="+GH_BRANCH,
      {headers:{"Authorization":"token "+token,"Accept":"application/vnd.github.v3+json"}}
    );
    var sha="";
    if(getRes.ok){var data=await getRes.json();sha=data.sha}

    // Update file
    var body={
      message:"ã‚·ãƒ•ãƒˆæ›´æ–° "+new Date().toLocaleString("ja-JP"),
      content:content,
      branch:GH_BRANCH
    };
    if(sha)body.sha=sha;

    var putRes=await fetch(
      "https://api.github.com/repos/"+GH_OWNER+"/"+GH_REPO+"/contents/"+GH_FILE,
      {method:"PUT",headers:{"Authorization":"token "+token,"Accept":"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify(body)}
    );

    if(putRes.ok){
      var now=new Date().toLocaleString("ja-JP");
      localStorage.setItem(LS_LASTSYNC,now);
      updateLastSynced(now);
      showSync("synced","âœ… åæ˜ å®Œäº†");
      if(!silent){
        st.className="deploy-status ok";
        st.textContent="âœ… åæ˜ å®Œäº†ï¼1ã€œ2åˆ†ã§ã‚µã‚¤ãƒˆãŒæ›´æ–°ã•ã‚Œã¾ã™";
      }
      toast("ğŸš€ ã‚µã‚¤ãƒˆæ›´æ–°å®Œäº†ï¼");
    }else{
      var err=await putRes.json();
      showSync("error","âŒ ã‚¨ãƒ©ãƒ¼");
      if(!silent){
        st.className="deploy-status err";
        st.textContent="âŒ ã‚¨ãƒ©ãƒ¼: "+(err.message||putRes.status);
      }
      toast("âŒ åæ˜ ã‚¨ãƒ©ãƒ¼");
    }
  }catch(e){
    showSync("error","âŒ é€šä¿¡ã‚¨ãƒ©ãƒ¼");
    if(!silent){
      st.className="deploy-status err";
      st.textContent="âŒ é€šä¿¡ã‚¨ãƒ©ãƒ¼: "+e.message;
    }
    toast("âŒ é€šä¿¡ã‚¨ãƒ©ãƒ¼");
  }
  isDeploying=false;
  btn.disabled=false;btn.textContent="ğŸš€ æ‰‹å‹•ã§åæ˜ ã™ã‚‹";
}

function buildDeployHTML(){
  var src=document.documentElement.outerHTML;
  var dataStr=JSON.stringify(allData);
  var evStr=JSON.stringify(events);
  var re=/\/\*@@DATA_START@@\*\/[\s\S]*?\/\*@@DATA_END@@\*\//;
  var replacement='/*@@DATA_START@@*/\nvar INIT_DATA='+dataStr+';\nvar INIT_EVENTS='+evStr+';\n/*@@DATA_END@@*/';
  src=src.replace(re,replacement);
  return "<!DOCTYPE html>\n"+src;
}

// ===== CSV IMPORT =====
var cz=document.getElementById("csvZone");
cz.addEventListener("dragover",function(e){e.preventDefault();cz.classList.add("drag")});
cz.addEventListener("dragleave",function(){cz.classList.remove("drag")});
cz.addEventListener("drop",function(e){e.preventDefault();cz.classList.remove("drag");if(e.dataTransfer.files.length)handleCSV(e.dataTransfer.files[0])});

function parseCSVLine(line){
  var r=[],c="",q=false;
  for(var i=0;i<line.length;i++){
    var ch=line[i];
    if(ch==='"')q=!q;
    else if(ch===","&&!q){r.push(c);c=""}
    else c+=ch;
  }
  r.push(c);return r;
}

function handleCSV(file){
  if(!file)return;
  var reader=new FileReader();
  reader.onload=function(e){
    try{
      var lines=e.target.result.split(/\r?\n/);
      var hi=-1;
      for(var i=0;i<Math.min(lines.length,5);i++){
        if(lines[i].includes("ã‚¹ã‚¿ãƒƒãƒ•")){hi=i;break}
      }
      if(hi===-1){csvSt("err","âŒ ãƒ˜ãƒƒãƒ€ãƒ¼è¡ŒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");return}
      var dY=cY,dM=cM;
      var ym=(lines[0]||"").match(/(\d{4})å¹´(\d{1,2})æœˆ/);
      if(ym){dY=parseInt(ym[1]);dM=parseInt(ym[2])}
      var k=dY+"-"+String(dM).padStart(2,"0");
      var dim=new Date(dY,dM,0).getDate();
      if(!allData[k])allData[k]={};
      var imp=0;
      for(var i=hi+1;i<lines.length;i++){
        var cols=parseCSVLine(lines[i]);
        if(cols.length<3)continue;
        var nm=cols[0].trim();
        if(!ST.includes(nm))continue;
        if(nm==="åˆè¨ˆ"||nm.includes("äººæ•°")||nm.includes("ğŸ“"))break;
        var sh=[];
        for(var d=0;d<dim;d++)sh.push((cols[d+2]||"").replace(/\n/g,"").trim());
        allData[k][nm]=sh;imp++;
      }
      if(imp>0){
        cY=dY;cM=dM;saveLocal();
        csvSt("ok","âœ… "+dY+"å¹´"+dM+"æœˆï¼ˆ"+imp+"åï¼‰èª­ã¿è¾¼ã¿å®Œäº† â†’ è‡ªå‹•åæ˜ ä¸­...");
        render();toast("ğŸ“¥ "+dM+"æœˆã‚·ãƒ•ãƒˆèª­ã¿è¾¼ã¿å®Œäº†");
        // Auto deploy after CSV import
        setTimeout(function(){deployToGitHub(true)},500);
      }else{csvSt("err","âŒ ã‚¹ã‚¿ãƒƒãƒ•ãƒ‡ãƒ¼ã‚¿ãªã—")}
    }catch(err){csvSt("err","âŒ "+err.message)}
  };
  reader.readAsText(file,"UTF-8");
}
function csvSt(t,m){var el=document.getElementById("csvSt");el.className="csv-status "+t;el.textContent=m}

// ===== EDIT MODAL =====
function openEdit(day){
  if(!isA)return;
  var m=document.getElementById("editModal");
  var dow=new Date(cY,cM-1,day).getDay();
  var opts=["","æ—©","é…","ä¼‘","å‹‰å¼·ä¼š","æ—©æ±äº¬æœ¬éƒ¨","æ—©æ–°å®¿","æ—©æ¨ªæµœ","æ—©å¤§é˜ª","æ—©ç¦å²¡","é…æ±äº¬æœ¬éƒ¨","é…æ–°å®¿","é…æ¨ªæµœ","é…å¤§é˜ª","é…ç¦å²¡","æ±äº¬æœ¬éƒ¨","æ–°å®¿","æ¨ªæµœ","å¤§é˜ª","ç¦å²¡"];
  var labels={"":"â”€","æ—©":"æ—©ç•ª","é…":"é…ç•ª","ä¼‘":"ä¼‘ã¿","å‹‰å¼·ä¼š":"å‹‰å¼·ä¼š","æ—©æ±äº¬æœ¬éƒ¨":"æ—©@æ±äº¬æœ¬éƒ¨","æ—©æ–°å®¿":"æ—©@æ–°å®¿","æ—©æ¨ªæµœ":"æ—©@æ¨ªæµœ","æ—©å¤§é˜ª":"æ—©@å¤§é˜ª","æ—©ç¦å²¡":"æ—©@ç¦å²¡","é…æ±äº¬æœ¬éƒ¨":"é…@æ±äº¬æœ¬éƒ¨","é…æ–°å®¿":"é…@æ–°å®¿","é…æ¨ªæµœ":"é…@æ¨ªæµœ","é…å¤§é˜ª":"é…@å¤§é˜ª","é…ç¦å²¡":"é…@ç¦å²¡","æ±äº¬æœ¬éƒ¨":"æ±äº¬æœ¬éƒ¨","æ–°å®¿":"æ–°å®¿","æ¨ªæµœ":"æ¨ªæµœ","å¤§é˜ª":"å¤§é˜ª","ç¦å²¡":"ç¦å²¡"};
  var h='<div class="modal-title">âœï¸ '+cM+'æœˆ'+day+'æ—¥ï¼ˆ'+DW[dow]+'ï¼‰</div>';
  ST.forEach(function(nm,i){
    var v=gV(nm,day);
    h+='<div class="modal-row"><div class="modal-label"><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:'+SC[i]+';margin-right:4px;vertical-align:middle"></span>'+nm+'</div><select class="modal-select" id="ed'+i+'" onchange="onEd('+i+','+day+')">';
    opts.forEach(function(o){h+='<option value="'+o+'"'+(v===o?' selected':'')+'>'+( labels[o]||o)+'</option>'});
    h+='</select></div>';
  });
  h+='<div class="modal-btns">';
  h+='<button class="btn btn-s" onclick="document.getElementById(\'editOv\').classList.add(\'hidden\')">é–‰ã˜ã‚‹</button>';
  h+='<button class="btn-save-only" onclick="saveAndClose()">ğŸ’¾ ä¿å­˜ã®ã¿</button>';
  h+='<button class="btn-save-deploy" id="btnSaveDeploy" onclick="saveAndDeploy()">ğŸ’¾ ä¿å­˜ï¼†åæ˜ </button>';
  h+='</div>';
  m.innerHTML=h;
  document.getElementById("editOv").classList.remove("hidden");
}
function onEd(si,day){sV(ST[si],day,document.getElementById("ed"+si).value);render()}

function saveAndClose(){
  document.getElementById("editOv").classList.add("hidden");
  toast("ğŸ’¾ ä¿å­˜ã—ã¾ã—ãŸï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿ï¼‰");
}

async function saveAndDeploy(){
  var btn=document.getElementById("btnSaveDeploy");
  btn.disabled=true;btn.textContent="â³ åæ˜ ä¸­...";
  document.getElementById("editOv").classList.add("hidden");
  toast("ğŸ’¾ ä¿å­˜ â†’ ã‚µã‚¤ãƒˆåæ˜ ä¸­...");
  await deployToGitHub(true);
  btn.disabled=false;btn.textContent="ğŸ’¾ ä¿å­˜ï¼†åæ˜ ";
}

// ===== EVENTS =====
function addEv(){
  var d=document.getElementById("evD").value;
  var t=document.getElementById("evT").value.trim();
  if(!d||!t){toast("âš ï¸ æ—¥ä»˜ã¨ã‚¤ãƒ™ãƒ³ãƒˆåã‚’å…¥åŠ›");return}
  if(!events[d])events[d]=[];
  events[d].push(t);
  document.getElementById("evT").value="";
  saveLocal();toast("ğŸŒ ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ ");render();
}
function rmEv(dk,i){
  events[dk].splice(i,1);
  if(!events[dk].length)delete events[dk];
  saveLocal();render();
}

// ===== RENDER =====
function render(){
  document.getElementById("mL").textContent=cY+"å¹´ "+cM+"æœˆ";
  var dim=new Date(cY,cM,0).getDate();
  var fd=new Date(cY,cM-1,1).getDay();
  var td=new Date();
  var k=mKey();

  var tE=0,tL=0,tW=0,wd=0;
  var locC={};LOCS.forEach(function(l){locC[l]=0});
  var ss={};ST.forEach(function(s){ss[s]={w:0,e:0,l:0,st:0}});
  var days=[];

  for(var d=1;d<=dim;d++){
    var dow=new Date(cY,cM-1,d).getDay();
    var isT=td.getFullYear()===cY&&td.getMonth()+1===cM&&td.getDate()===d;
    var evts=getEv(d);
    var ent=[];var dc=0;

    ST.forEach(function(nm,si){
      var v=gV(nm,d);if(!v)return;
      var info=classify(v);if(!info)return;
      ent.push({nm:nm,si:si,info:info});
      if(info.t==="e"){dc++;tE++;ss[nm].w++;ss[nm].e++;if(info.loc&&locC[info.loc]!==undefined)locC[info.loc]++}
      else if(info.t==="l"){dc++;tL++;ss[nm].w++;ss[nm].l++;if(info.loc&&locC[info.loc]!==undefined)locC[info.loc]++}
      else if(info.t==="loc"){dc++;ss[nm].w++;if(locC[info.loc]!==undefined)locC[info.loc]++}
      else if(info.t==="s"){ss[nm].st++}
    });
    if(dc>0)wd++;
    tW+=dc;
    days.push({d:d,dow:dow,isT:isT,ent:ent,dc:dc,evts:evts});
  }

  // Stats
  document.getElementById("stats").innerHTML=mode==="admin"
    ?'<div class="stat"><div class="stat-v">'+wd+'</div><div class="stat-l">ç¨¼åƒæ—¥</div></div><div class="stat"><div class="stat-v">'+ST.length+'</div><div class="stat-l">ã‚¹ã‚¿ãƒƒãƒ•</div></div><div class="stat"><div class="stat-v">'+tE+'</div><div class="stat-l">æ—©ç•ª</div></div><div class="stat"><div class="stat-v">'+tL+'</div><div class="stat-l">é…ç•ª</div></div><div class="stat"><div class="stat-v">'+tW+'</div><div class="stat-l">ç·å‡ºå‹¤</div></div>'
    :'<div class="stat"><div class="stat-v">'+wd+'</div><div class="stat-l">ç¨¼åƒæ—¥</div></div><div class="stat"><div class="stat-v">'+tE+'</div><div class="stat-l">æ—©ç•ª</div></div><div class="stat"><div class="stat-v">'+tL+'</div><div class="stat-l">é…ç•ª</div></div>';

  // Calendar Grid
  var h="";
  for(var i=0;i<fd;i++)h+='<div class="cal-c empty"></div>';

  days.forEach(function(day){
    var cls="cal-c";
    if(day.dow===0)cls+=" sun";
    if(day.dow===6)cls+=" sat";
    if(day.isT)cls+=" today";
    if(isA)cls+=" editable";
    var click=isA?' onclick="openEdit('+day.d+')"':'';
    var tags="";

    day.evts.forEach(function(ev){tags+='<div class="tg tg-ev">ğŸŒ '+ev+'</div>'});

    if(mode==="staff"){
      var en=[],ln=[];
      day.ent.forEach(function(x){if(x.info.t==="e")en.push(x.nm);if(x.info.t==="l")ln.push(x.nm)});
      if(en.length)tags+='<div class="tg tg-e">â˜€ '+en.join("ãƒ»")+'</div>';
      if(ln.length)tags+='<div class="tg tg-l">ğŸŒ™ '+ln.join("ãƒ»")+'</div>';
    }else{
      day.ent.forEach(function(x){
        var t="",c="";
        if(x.info.t==="e"){c="tg-e";t="â˜€"+x.nm+(x.info.loc?" @"+x.info.loc:"")}
        else if(x.info.t==="l"){c="tg-l";t="ğŸŒ™"+x.nm+(x.info.loc?" @"+x.info.loc:"")}
        else if(x.info.t==="o"){c="tg-o";t=x.nm+" ä¼‘"}
        else if(x.info.t==="s"){c="tg-st";t="ğŸ“–"+x.nm}
        else if(x.info.t==="loc"){c="tg-loc";t="ğŸ“"+x.nm+"@"+x.info.loc}
        tags+='<div class="tg '+c+'">'+t+'</div>';
      });
    }

    var nb=day.dc>0?'<span class="cd-n">'+day.dc+'</span>':"";
    h+='<div class="'+cls+'"'+click+'><div class="cd"><span>'+day.d+'</span>'+nb+'</div>'+tags+'</div>';
  });
  document.getElementById("cG").innerHTML=h;

  // Legend
  document.getElementById("leg").innerHTML=mode==="staff"
    ?'<div class="lg"><div class="lg-d" style="background:var(--early-bg);border:1px solid #81C784"></div>æ—©ç•ª 9-15æ™‚</div><div class="lg"><div class="lg-d" style="background:var(--late-bg);border:1px solid #FFB74D"></div>é…ç•ª 12-18æ™‚</div><div class="lg"><div class="lg-d" style="background:var(--event-bg);border:1px solid #4DB6AC"></div>ã‚¤ãƒ™ãƒ³ãƒˆ</div>'
    :'<div class="lg"><div class="lg-d" style="background:var(--early-bg);border:1px solid #81C784"></div>æ—©ç•ª</div><div class="lg"><div class="lg-d" style="background:var(--late-bg);border:1px solid #FFB74D"></div>é…ç•ª</div><div class="lg"><div class="lg-d" style="background:var(--loc-bg);border:1px solid #64B5F6"></div>æ•™å®¤</div><div class="lg"><div class="lg-d" style="background:var(--study-bg);border:1px solid #BA68C8"></div>å‹‰å¼·ä¼š</div><div class="lg"><div class="lg-d" style="background:var(--off-bg);border:1px solid #EF9A9A"></div>ä¼‘ã¿</div><div class="lg"><div class="lg-d" style="background:var(--event-bg);border:1px solid #4DB6AC"></div>ã‚¤ãƒ™ãƒ³ãƒˆ</div><div class="lg" style="margin-left:auto;font-weight:600;color:var(--accent)">ğŸ“ æ—¥ä»˜ã‚¯ãƒªãƒƒã‚¯â†’ç·¨é›†</div>';

  // Admin sections
  if(mode==="admin"){
    var db=document.getElementById("dataBadge");
    db.className="data-badge "+(hasData()?"has":"no");
    db.textContent=hasData()?"ãƒ‡ãƒ¼ã‚¿ã‚ã‚Š":"ãƒ‡ãƒ¼ã‚¿ãªã—";

    var lh="";
    LOCS.forEach(function(l,i){lh+='<div class="loc-item"><div class="loc-dot" style="background:'+LC[i]+'"></div><div class="loc-name">'+l+'</div><div class="loc-count">'+(locC[l]||0)+'</div></div>'});
    document.getElementById("locG").innerHTML=lh;

    var mx=Math.max.apply(null,ST.map(function(s){return ss[s].w}))||1;
    var th='<thead><tr><th>ã‚¹ã‚¿ãƒƒãƒ•</th><th>å‡ºå‹¤</th><th>æ—©ç•ª</th><th>é…ç•ª</th><th>å‹‰å¼·ä¼š</th><th>ç¨¼åƒ</th></tr></thead><tbody>';
    ST.forEach(function(n,i){
      var s=ss[n];
      th+='<tr><td><span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:'+SC[i]+';margin-right:5px;vertical-align:middle"></span>'+n+'</td><td><strong>'+s.w+'</strong></td><td style="color:var(--early-fg)">'+s.e+'</td><td style="color:var(--late-fg)">'+s.l+'</td><td style="color:var(--study-fg)">'+s.st+'</td><td><div class="bar"><div class="bar-f" style="width:'+Math.round(s.w/mx*100)+'%;background:'+SC[i]+'"></div></div></td></tr>';
    });
    document.getElementById("sTbl").innerHTML=th+"</tbody>";

    var eh="";
    Object.keys(events).sort().forEach(function(dk){
      if(dk.indexOf(k)!==0)return;
      events[dk].forEach(function(ev,idx){
        var day=parseInt(dk.split("-")[2]);
        var ddow=new Date(cY,cM-1,day).getDay();
        eh+='<div class="ev-item"><span>ğŸ“… '+cM+'/'+day+'ï¼ˆ'+DW[ddow]+'ï¼‰<strong>'+ev+'</strong></span><button class="btn-d" onclick="rmEv(\''+dk+'\','+idx+')">âœ•</button></div>';
      });
    });
    document.getElementById("evList").innerHTML=eh||'<div style="color:var(--text-light);font-size:11px">ã‚¤ãƒ™ãƒ³ãƒˆãªã—</div>';
    document.getElementById("evD").value=cY+"-"+String(cM).padStart(2,"0")+"-01";
  }
}

// ===== TOAST =====
function toast(m){
  var t=document.getElementById("toast");
  t.textContent=m;t.classList.add("show");
  setTimeout(function(){t.classList.remove("show")},3000);
}

// ===== INIT =====
render();
</script>


</body></html>